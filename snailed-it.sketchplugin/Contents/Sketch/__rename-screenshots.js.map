{"version":3,"file":"__rename-screenshots.js","mappings":"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","sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/rename-screenshots.js","webpack://exports/external \"sketch\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/rename-screenshots.js\");\n","import sketch from 'sketch'\nconst UI = sketch.UI\n\nconst formats = ['Device', 'Combined', 'Partial', 'Press', 'AppStore']\nconst devices = ['iPhone', 'iPad']\nconst iphoneModels = ['iPhone_17_Pro', 'iPhone_16_Pro', 'iPhone_15_Pro']\nconst ipadModels = ['iPad_Pro_M5_13inch', 'iPad_Pro_M4_13inch', 'iPad_Air_M2_11inch']\nconst types = ['Framed', 'Raw']\nconst apps = ['Capsule', 'Logger', 'Toolbox_Pro', 'Pushcut', 'Nautomate', 'Menu_Box'].sort()\n\nfunction stripIncorrectSuffix(name) {\n  const allModels = [...iphoneModels, ...ipadModels]\n  for (const model of allModels) {\n    if (name.endsWith(`_${model}_Dark`)) return name.replace(`_${model}_Dark`, '')\n    if (name.endsWith(`_${model}_Light`)) return name.replace(`_${model}_Light`, '')\n  }\n  if (name.endsWith('_Dark')) return name.slice(0, -5)\n  if (name.endsWith('_Light')) return name.slice(0, -6)\n  return name\n}\n\nfunction stripFolders(name) {\n  const parts = name.split(/[/\\\\]/)\n  return parts[parts.length - 1]\n}\n\n\nfunction renameLayers(selectedLayers, format, device, model, type, app) {\n  let prefix = ''\n  const correctDarkSuffix = `_${model}_Dark`\n  const correctLightSuffix = `_${model}_Light`\n\n  switch (format) {\n    case 'Device':\n      prefix = `${app}_Screenshots/${device}/${model}/${type}/${app}_`\n      break\n    case 'Combined':\n      prefix = `${app}_Screenshots/Combined/${app}_`\n      break\n    case 'Partial':\n      prefix = `${app}_Screenshots/Partial/${app}_`\n      break\n    case 'Press':\n      prefix = `${app}_Screenshots/Press/${model}/${type}/${app}_`\n      break\n    case 'AppStore':\n      prefix = `${app}_Screenshots/AppStore/${device}/${app}_`\n      break\n  }\n\n  const useLightDark = format !== 'AppStore'\n\n  selectedLayers.forEach((layer, i) => {\n    const originalName = layer.name\n    let striped_folder_name = stripFolders(originalName)\n    let name = stripIncorrectSuffix(striped_folder_name)\n\n    const appPrefixPattern = new RegExp(`^${app}_`, 'i')\n    name = name.replace(appPrefixPattern, '')\n\n    if (!name.startsWith(prefix)) {\n      name = prefix + name\n    }\n\n    if (useLightDark) {\n      if (/_Dark$/.test(originalName)) {\n        name += correctDarkSuffix\n      } else if (/_Light$/.test(originalName)) {\n        name += correctLightSuffix\n      }\n    }\n\n    if (name !== layer.name) {\n      layer.name = name\n      console.log(`${i + 1}. Renamed \"${originalName}\" â†’ \"${name}\"`)\n    } else {\n      console.log(`${i + 1}. Skipped \"${name}\" (already correct)`)\n    }\n  })\n}\n\nexport default function () {\n  const document = sketch.getSelectedDocument()\n  const selectedLayers = document.selectedLayers\n\n  if (selectedLayers.length === 0) {\n    UI.message('No layers selected. Please select layers before running the plugin.')\n    return\n  }\n\n  UI.getInputFromUser(\n    'Select format type',\n    {\n      type: UI.INPUT_TYPE.selection,\n      possibleValues: formats,\n    },\n    (errFormat, selectedFormat) => {\n      if (errFormat) return console.log('Cancelled format selection.')\n\n      UI.getInputFromUser(\n        'Select app',\n        {\n          type: UI.INPUT_TYPE.selection,\n          possibleValues: apps,\n        },\n        (errApp, selectedApp) => {\n          if (errApp) return console.log('Cancelled app selection.')\n\n          const askDevice = ['Device', 'AppStore'].includes(selectedFormat)\n          const askModel = ['Device', 'Press'].includes(selectedFormat)\n          const askType = ['Device', 'Press'].includes(selectedFormat)\n\n          const getDevice = askDevice\n            ? cb =>\n                UI.getInputFromUser(\n                  'Select device',\n                  {\n                    type: UI.INPUT_TYPE.selection,\n                    possibleValues: devices,\n                  },\n                  (err, val) => {\n                    if (err) return console.log('Cancelled device selection.')\n                    cb(val)\n                  }\n                )\n            : cb => cb('')\n\n          const getModel = (device, cb) =>\n            askModel\n              ? UI.getInputFromUser(\n                  `Select ${device || 'device'} model`,\n                  {\n                    type: UI.INPUT_TYPE.selection,\n                    possibleValues: device === 'iPad' ? ipadModels : iphoneModels,\n                  },\n                  (err, val) => {\n                    if (err) return console.log('Cancelled model selection.')\n                    cb(val)\n                  }\n                )\n              : cb('')\n\n          const getType = cb =>\n            askType\n              ? UI.getInputFromUser(\n                  'Select type',\n                  {\n                    type: UI.INPUT_TYPE.selection,\n                    possibleValues: types,\n                  },\n                  (err, val) => {\n                    if (err) return console.log('Cancelled type selection.')\n                    cb(val)\n                  }\n                )\n              : cb('')\n\n          getDevice(device => {\n            getModel(device, model => {\n              getType(type => {\n                renameLayers(selectedLayers.layers, selectedFormat, device, model, type, selectedApp)\n                UI.message('Layer renaming complete.')\n              })\n            })\n          })\n        }\n      )\n    }\n  )\n}\n","module.exports = require(\"sketch\");"],"names":["UI","sketch","formats","devices","iphoneModels","ipadModels","types","apps","sort","stripIncorrectSuffix","name","allModels","concat","_iterator","_createForOfIteratorHelper","_step","s","n","done","model","value","endsWith","replace","err","e","f","slice","stripFolders","parts","split","length","renameLayers","selectedLayers","format","device","type","app","prefix","correctDarkSuffix","correctLightSuffix","useLightDark","forEach","layer","i","originalName","striped_folder_name","appPrefixPattern","RegExp","startsWith","test","console","log","document","getSelectedDocument","message","getInputFromUser","INPUT_TYPE","selection","possibleValues","errFormat","selectedFormat","errApp","selectedApp","askDevice","includes","askModel","askType","getDevice","cb","val","getModel","getType","layers"],"sourceRoot":""}